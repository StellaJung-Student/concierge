<div class="container">
  <div class="columns">
    <div class="col-2">
      <input class="form-input" type="text" placeholder="Filter for images..." data-bind="textInput: imageFilter" />
    </div>

    <div class="divider-vert"></div>

    <div class="col-3">
      <button class="btn btn-md" data-bind="click: clearFilter">Clear Filter</button>
      <button class="btn btn-md" data-bind="click: refresh">Refresh</button>
      <button class="btn btn-md" data-bind="click: showPullModal">Pull Image</button>
    </div>

    <div class="col-7"></div>
  </div>
</div>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Tag</th>
      <th>Id</th>
      <th>Size</th>
      <th>Created</th>
      <th></th>
    </tr>
  </thead>
  <tbody data-bind="foreach: filteredImages">
    <tr>
      <td data-bind="text: name"></td>
      <td data-bind="text: Id.replace('sha256:', '').slice(0, 10)"></td>
      <td data-bind="text: $parent.toMb(Size)"></td>
      <td data-bind="text: $parent.toDate(Created)"></td>
      <td>
        <button class="btn btn-md" data-bind="click: function() { $parent.configureImage($data) }">Run</button>
        <button class="btn btn-md" data-bind="click: $parent.removeImage">Remove</button>
      </td>
    </tr>
  </tbody>
</table>

<div class="modal" data-bind="css: { active: pullModalActive }">
  <div class="modal-overlay" data-bind="click: hidePullModal"></div>
  <div class="modal-container">
    <div class="modal-header">
      Pull Image
    </div>

    <div class="modal-body">
      <div class="content">
        <div class="form-group">
          <label class="form-label">Image Name</label>
          <input class="form-input" type="text" data-bind="textInput: pullImage.imageName" />
        </div>

        <div class="form-group">
          <label class="form-label">Image Tag <sub style="float: right">(Optional) Defaults to 'latest'</sub></label>
          <input class="form-input" type="text" data-bind="textInput: pullImage.tag" placeholder="Defaults to 'latest'"/>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn btn-md" data-bind="click: hidePullModal">Cancel</button>
      <button class="btn btn-md" data-bind="click: runPullImage, enable: pullImageEnabled">Pull</button>
    </div>
  </div>
</div>

<div class="modal" data-bind="css: { active: modalActive }">
  <div class="modal-overlay" data-bind="click: hideModal"></div>
  <div class="modal-container">
    <div class="modal-header">
      <button class="btn btn-clear float-right" data-bind="click: hideModal"></button>
      <div class="modal-title">
        <strong>Image:</strong> <span data-bind="text: modalImage().name"></span>
      </div>
    </div>
    <div class="modal-body">
      <div class="content">
        <form>
          <div class="form-group">
            <label class="form-label">Name</label>
            <input class="form-input" type="text" data-bind="textInput: newContainer.name" placeholder="[Optional] Vanity name..." />
          </div>

          <div class="divider"></div>
          <strong>Links</strong>

          <!-- ko if: linkableContainers().length > 0 -->
          <div class="input-group" style="margin-bottom: 10px">
            <select class="form-select" data-bind="options: linkableContainers, optionsText: 'label', value: selectedContainerLink"></select>
            <button class="btn btn-md" data-bind="click: addContainerLink">Add</button>
          </div>
          <!-- /ko -->

          <div data-bind="foreach: newContainer.links">
            <div class="input-group" style="margin-bottom: 10px">
              <span class="input-group-addon" data-bind="text: containerName"></span>
              <input type="text" class="form-input" data-bind="textInput: alias" placeholder="[Required] Link alias..." />
              <button class="btn btn-md" data-bind="click: $parent.removeContainerLink">Remove</button>
            </div>
          </div>

          <!-- ko if: newContainer.ports().length > 0 -->
          <div class="divider"></div>
          <strong>Expose Ports:</strong>

          <!-- ko foreach: newContainer.ports -->
          <div class="form-group">
            <label class="form-switch">
                  <input type="checkbox" />
                  <i class="form-icon" data-bind="click: function() { expose(!expose()); return true }"></i><span data-bind="text: port + '/' + type"></span>
              </label>
          </div>
          <!-- /ko -->
          <!-- /ko -->


          <!-- ko if: newContainer.volumes().length > 0 -->
          <div class="divider"></div>
          <strong>Volumes:</strong>

          <!-- ko foreach: newContainer.volumes -->
          <div class="form-group">
            <label class="form-label" data-bind="text: path"></label>
            <input class="form-input" type="text" data-bind="textInput: hostPath" placeholder="Host path mount" />
          </div>
          <!-- /ko -->
          <!-- /ko -->

          <!-- ko if: newContainer.envs().length > 0 -->
          <div class="divider"></div>
          <strong>Environment Variables:</strong>

          <!-- ko foreach: newContainer.envs -->
          <div class="form-group">
            <label class="form-label" data-bind="text: key"></label>
            <input class="form-input" type="text" data-bind="textInput: value" />
          </div>
          <!-- /ko -->
          <!-- /ko -->

        </form>
      </div>

    </div>
    <div class="modal-footer">
      <button class="btn btn-md" data-bind="click: hideModal">Cancel</button>
      <button class="btn btn-md" data-bind="click: runContainer, enable: canRunContainer">Run</button>
    </div>
  </div>
</div>